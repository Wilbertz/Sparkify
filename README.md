# Sparkify

## Table of Contents

1. [Installation](#installation)
2. [Directory Structure](#directoryStructure)
3. [Project Motivation](#motivation)
4. [Data Exploration](#exploration)
5. [Features](#features)
6. [Modelling](#modelling)
7. [Results](#results)

## Installation <a name="installation"></a>
This project was written in Python 3.6, using a Jupyter Notebook on Anaconda. The relevant Python packages for this project are as follows:

- numpy
- pandas
- datetime
- pyspark.sql
- pyspark.sql.functions
- pyspark.sql.types
- pyspark.sql.window
- pyspark.ml.feature 
- pyspark.ml.classification
- pyspark.ml.evaluation
- pyspark.ml.tuning
- sklearn.metrics

## Directory Structure <a name="directoryStructure"></a>

- Root /

    - README.md  
    - Sparkify.ipynb
    
## Project Motivation <a name="motivation"></a>
Sparkify is a music streaming service like Spotify. There are paid premium services and free basic services. 
The free users will listen to ads while the paid users consume songs ad-free. At any time users can upgrade, 
downgrade or cancel their subscription. 
We want to identify the users that could potentially cancel their account and leave the service. 
By identifying this population upfront, we could incentive them by giving them discounts or other rewards. 
This could make them stick, giving us a loyal customer base which is important for the company's success.

Within this project churn is defined as a cancellation of service. 
In case a "Cancellation Confirmation" event for a user is detected, this user is considered to have churned. 
There might be multiple cancellation confirmations, due to the fact, 
that a user registered after cancellations but cancelled again.

## Data Exploration <a name="exploration"></a>
All users (free and paid) have to log in in order to use the service. Log data is generated by the user activities at any given time. From these activities we can identify and analyze specific actions (e.g. number of songs played, number thumbs up, etc.).The full data set is 12 GB, but only a subset of 128 Mb will be used. 

The data set has 18 different columns and there are 286,500 records.

There are 8346 rows where the userId is empty. Since there are also 8346 rows where first name and last name is missing (probably the same rows) there exists no substitute for an user id. Therefore these rows have been removed. After removing these rows there are still 50046 (17 %) rows, where essential information like artist or song is missing. Probably these are page hits that don't involve a song like landing page hits.

The data set contains data for 63 days, around 2 months (1 October 2018 until 3 December 2018)
A total of 225 users have interacted with Sparkify in a total of 2312 sessions. The data set contains 58481 different songs from 17656 artists.

49 users downgraded and 52 users cancelled their subscription.
In case of the 52 users who cancelled, 9 downgraded before cancelling, 43 cancelled without a downgrade. In case of the 52 users who cancelled, 31 are paid users, 21 are free users.

## Features <a name="features"></a>

## Modelling <a name="modelling"></a>

## Results <a name="results"></a>
The GBT (Gradient Boosted Trees) classifier produced the best results. An F1 score of 85.7 % could be reached after a Grid search. The values for Precision and Recall were 78.9 % and 93.7 %.
